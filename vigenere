def chiffrement_vigenere(message, key, alphabet, supprimer_espaces=True):
    if supprimer_espaces:
        message = ''.join(message.split()) # Supprime les espaces dans le message

    # Créer le tableau de substitution
    tableau = []
    for i in range(len(alphabet)):
        tableau.append([])
        for j in range(len(alphabet)):
            position = (j + i) % len(alphabet)
            tableau[i].append(alphabet[position])

    # Initialiser le texte chiffré
    chiffre = ""

    # Chiffrer le message
    for i in range(len(message)):
        lettre_message = message[i]
        position_lettre = alphabet.index(lettre_message.upper())
        lettre_cle = key[i % len(key)]
        position_cle = alphabet.index(lettre_cle.upper())
        chiffre += tableau[position_cle][position_lettre]

    return chiffre


def dechiffrement_vigenere(chiffre, key, alphabet, supprimer_espaces=True):
    if supprimer_espaces:
        chiffre = ''.join(chiffre.split()) # Supprime les espaces dans le message chiffré

    # Créer le tableau de substitution
    tableau = []
    for i in range(len(alphabet)):
        tableau.append([])
        for j in range(len(alphabet)):
            position = (j + i) % len(alphabet)
            tableau[i].append(alphabet[position])

    # Initialiser le texte déchiffré
    message = ""

    # Déchiffrer le message
    for i in range(len(chiffre)):
        lettre_chiffre = chiffre[i]
        position_cle = alphabet.index(key[i % len(key)].upper())
        for j in range(len(alphabet)):
            if tableau[position_cle][j] == lettre_chiffre.upper():
                message += alphabet[j]

    return message


alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZÀÂÄÆÇÉÈÊËÎÏÔŒÙÛÜŸ"
cle = "MERCREDI"
message = "totoparapluie"

# Chiffrer le message avec la clé Vigenère
message_chiffre = chiffrement_vigenere(message, cle, alphabet, supprimer_espaces=True)
print("Message chiffré :")
print(message_chiffre)

message_dechiffre = dechiffrement_vigenere(message_chiffre, cle, alphabet, supprimer_espaces=True)
print("Message déchiffré :")
print(message_dechiffre)