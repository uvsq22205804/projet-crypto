def chiffrement_vigenere(message, key, alphabet, supprimer_espaces=True):
    if supprimer_espaces:
        message = ''.join(message.split()) #Supprime les espaces dans le message

    #créer le tableau de vigenère
    Tableau = []
    for i in range(len(alphabet)):
        Tableau.append([])
        for j in range(len(alphabet)):
            position = (j + i) % len(alphabet)
            Tableau[i].append(alphabet[position])

    #initialiser le texte chiffré
    chiffre = ""

    # Chiffrer le message
    for i in range(len(message)):
        lettre_message = message[i] #récupère la lettre du msg correspondant  la position actuelle
        position_lettre = alphabet.index(lettre_message.upper()) #obtient la position de la lettre dans l'alphabet
        lettre_cle = key[i % len(key)] #récuper la lettre de a clé correspondant à la position actuelle dans le message
        position_cle = alphabet.index(lettre_cle.upper()) #obtient la positon de la lettre de la clé dans l'alphabet
        chiffre += tableau[position_cle][position_lettre] #ajoute la lettre chifrré au mesg chiffré

    return chiffre


def dechiffrement_vigenere(chiffre, key, alphabet, supprimer_espaces=True):
    if supprimer_espaces:
        chiffre = ''.join(chiffre.split()) #Supprime les espaces dans le message chiffré

    # Créer le tableau de vigenère
    tableau = []
    for i in range(len(alphabet)):
        tableau.append([])
        for j in range(len(alphabet)):
            position = (j + i) % len(alphabet)
            tableau[i].append(alphabet[position])

    #initialiser le texte déchiffré
    message = ""

    # Déchiffrer le message
    for i in range(len(chiffre)):
        lettre_chiffre = chiffre[i]
        position_cle = alphabet.index(key[i % len(key)].upper())
        for j in range(len(alphabet)):
            if tableau[position_cle][j] == lettre_chiffre.upper():
                message += alphabet[j]

    return message


alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZÀÂÄÆÇÉÈÊËÎÏÔŒÙÛÜŸ"
cle = "MERCREDI"
message = "totoparapluie"

#Exemple d'utiisation
message_chiffre = chiffrement_vigenere(message, cle, alphabet, supprimer_espaces=True)
print("Message chiffré :")
print(message_chiffre)

message_dechiffre = dechiffrement_vigenere(message_chiffre, cle, alphabet, supprimer_espaces=True)
print("Message déchiffré :")
print(message_dechiffre)